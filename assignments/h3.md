# Tehtävä h3
[Tehtävänanto (Tero Karvinen)](http://terokarvinen.com/2018/aikataulu-%E2%80%93-palvelinten-hallinta-ict4tn022-4-ti-5-ke-5-loppukevat-2018-5p#h3)

## Alku

Käyttöjärjestelmä on Xubuntu 16.04.3. Saltin versio on 2015.8.8 Beryllium, joka on vanha, mutta apt-paketinhallinnan oletusversio. Asensin Saltin paikallisesti kuten tehtävässä [h1](https://github.com/Oliver-Siren/palvelinten-hallinta-ict4tn022-4/blob/master/assignments/h1.md).

## Salt & Jinja aloitus

Loin /srv/salt/-kansioon jinja/-alakansion, johon luon sls-tiedostot jokaista vaihetta varten. Nämä ajetaan top.sls-tiedostolla:

```
base:
  '*':
    - jinja.init
    - jinja.loop
    - jinja.ssh
```

Init.sls-tiedosto oli ensimmäinen kokeiluni Jinjan muottien kanssa. Päätin yksinkertaisesti siirtää /tmp/-kansioon tekstitiedoston, jonka sisältö määräytyy Jinjan avulla. Kokeilin myös if-lausetta samalla. Init.sls:

```
{% if grains['os'] == 'Ubuntu' %}
/tmp/initial.txt:
  file.managed:
    - source: salt://jinja/initial.txt
    - template: jinja
    - context: 
      hilavitkutin: Jinja taitaa toimia oikein

{% endif %}
```

Ja initial.txt, joka siirretään:

```
Jinja at least works? {{ hilavitkutin }}
```

Ajettaessa init.sls /tmp/-kansioon siirretään tekstitiedosto, jossa ei pitäisi näkyä muuttujaa "hilavitkutin", vaan korvaava teksti.

## Salt state, Jinja for/in

.

## SSH Saltin ja Jinjan avulla

.

## Toisen opiskelijan Salt state

.

---
